"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[362],{24362:(X,c,n)=>{n.r(c),n.d(c,{RequestListSCIModule:()=>$,routes:()=>_});var d=n(86019),q=n(94296),I=n(39914),t=n(83668),m=n(8870),u=n(49133),p=n(91553),g=n(15304),f=n(39260),h=n(59112),C=n(28167),Z=n(74383),s=n(960),T=n(58977),x=n(90086),v=n(87444);function S(e,i){1&e&&(t.TgZ(0,"th",24),t._uU(1," No. "),t.qZA())}function A(e,i){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",o.id," ")}}function R(e,i){1&e&&(t.TgZ(0,"th",24),t._uU(1," Lider Auditado "),t.qZA())}function L(e,i){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",o.process_lead_name," ")}}function P(e,i){1&e&&(t.TgZ(0,"th",24),t._uU(1," Fecha "),t.qZA())}function D(e,i){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",o.detected_date," ")}}function y(e,i){1&e&&(t.TgZ(0,"th",24),t._uU(1," Descripcion "),t.qZA())}function b(e,i){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",o.request_description," ")}}function N(e,i){1&e&&(t.TgZ(0,"th",24),t.TgZ(1,"div",26),t._uU(2,"Opciones"),t.qZA(),t.qZA())}function U(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(o);const l=t.oxw().$implicit;return t.oxw().openDialog(l)}),t._UZ(1,"mat-icon",33),t.qZA()}2&e&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:cube-transparent"))}function Y(e,i){1&e&&(t.TgZ(0,"button",34),t._UZ(1,"mat-icon",35),t.qZA()),2&e&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:cube"))}const Q=function(){return["open"]},w=function(){return["ready_to_close"]};function z(e,i){if(1&e&&(t.TgZ(0,"td",25),t.TgZ(1,"div",27),t.TgZ(2,"button",28),t._UZ(3,"mat-icon",29),t.qZA(),t.YNc(4,U,2,1,"button",30),t.YNc(5,Y,2,1,"button",31),t.qZA(),t.qZA()),2&e){const o=i.$implicit,a=t.oxw();t.xp6(3),t.Q6J("svgIcon","heroicons_outline:information-circle"),t.xp6(1),t.Q6J("ngIf",t.DdM(3,Q).includes(o.status)),t.xp6(1),t.Q6J("ngIf",t.DdM(4,w).includes(o.status)&&a.isAdmin)}}function M(e,i){1&e&&t._UZ(0,"tr",36)}function F(e,i){1&e&&t._UZ(0,"tr",37)}const J=function(){return[5,10,25,100]},B=[{id:251,tech_lead:"Diego Palacios",date:"02/12/2021",desc:"Incumpliento de la ISO 271",role:"aud"},{id:341,tech_lead:"Bladimir Rodriguez",date:"02/12/2021",desc:"Problemas en la compra de infrastructura",role:"lead"},{id:889,tech_lead:"Edwin Marin",date:"02/12/2021",desc:"Error en duracion del contrato",role:"admin"},{id:125,tech_lead:"Carlos Sarmiento",date:"02/12/2021",desc:"Inconsistencias financieras",role:"admin"},{id:678,tech_lead:"Diego Palacios",date:"02/12/2021",desc:"Reporte negativo de facturacion",role:"admin"},{id:1208,tech_lead:"Diego Palacios",date:"02/12/2021",desc:"Apreciacion incorrecta de tiempos",role:"admin"},{id:4087,tech_lead:"Edwin Marin",date:"02/12/2021",desc:"Asignacion alta de presupuesto",role:"admin"},{id:9035,tech_lead:"Bladimir Rodriguez",date:"02/12/2021",desc:"Problemas internos",role:"admin"},{id:12308,tech_lead:"Bladimir Rodriguez",date:"02/12/2021",desc:"Falta HSEQ",role:"admin"},{id:12509,tech_lead:"Edwin Marin",date:"02/12/2021",desc:"Nombramiento incorrecto",role:"admin"}];let H=(()=>{class e{constructor(o,a,l,r,K){this._service=o,this._formBuilder=a,this._router=l,this._dialog=r,this._userService=K,this.displayedColumns=["id","process_lead_name","detected_date","request_description","options"],this.formFieldHelpers=[""],this.dataSource=B,this.requests=[],this.totalItems=1,this.itemsPerPage=10,this.currentPage=0,this.postPerPage=0,this.isAdmin=!1,this.searchFormControl=a.group({search:[""],status:["Todos"]})}ngOnInit(){this.updateTable()}onPaginate(o){this.postPerPage=+o.pageSize,this.currentPage=+o.pageIndex+1,this.updateTable()}updateTable(){this._service.getRequests({request_type:"sci",page:this.currentPage,per_page:this.postPerPage}).subscribe({next:o=>{this.requests=o.data.map(a=>new q.q(a)),this.currentPage=o.current_page,this.itemsPerPage=parseInt(o.per_page),this.totalItems=o.total,console.log(o)},error:o=>{console.log(o)}})}getFormFieldHelpersAsString(){return this.formFieldHelpers.join(" ")}openDialog(o){this._dialog.open(I.S,{width:"900px",data:o}).afterClosed().subscribe(l=>{console.log(`Dialog result: ${l}`)})}followDetail(){this._router.navigateByUrl("/request/detail")}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.s),t.Y36(u.qu),t.Y36(p.F0),t.Y36(g.uw),t.Y36(f.K))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-request-list"]],decls:36,vars:8,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","border-b","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex-auto","p-6","sm:p-10"],[1,"w-full"],["matInput",""],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","process_lead_name"],["matColumnDef","detected_date"],["matColumnDef","request_description"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mat-elevation-z8",3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],[1,"flex","justify-end","mr-10"],[1,"flex","justify-end"],["mat-icon-button","","color","primary","matTooltip","Ver detalle",1,"mr-2"],[3,"svgIcon"],["mat-icon-button","","matTooltip","Hacer seguimiento","class","mr-2",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Finalizar seguimiento","class","mr-2",4,"ngIf"],["mat-icon-button","","matTooltip","Hacer seguimiento",1,"mr-2",3,"click"],[1,"text-green_eh",3,"svgIcon"],["mat-icon-button","","matTooltip","Finalizar seguimiento",1,"mr-2"],[1,"text-orange_eh",3,"svgIcon"],["mat-header-row",""],["mat-row",""]],template:function(o,a){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div"),t.TgZ(5,"a",4),t._uU(6,"Solicitudes"),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t._UZ(8,"mat-icon",6),t.TgZ(9,"a",7),t._uU(10,"Listar"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",8),t.TgZ(12,"h2",9),t._uU(13," Listar Solicitudes "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",10),t.TgZ(15,"mat-form-field",11),t._UZ(16,"input",12),t.qZA(),t.TgZ(17,"table",13),t.ynx(18,14),t.YNc(19,S,2,0,"th",15),t.YNc(20,A,2,1,"td",16),t.BQk(),t.ynx(21,17),t.YNc(22,R,2,0,"th",15),t.YNc(23,L,2,1,"td",16),t.BQk(),t.ynx(24,18),t.YNc(25,P,2,0,"th",15),t.YNc(26,D,2,1,"td",16),t.BQk(),t.ynx(27,19),t.YNc(28,y,2,0,"th",15),t.YNc(29,b,2,1,"td",16),t.BQk(),t.ynx(30,20),t.YNc(31,N,3,0,"th",15),t.YNc(32,z,6,5,"td",16),t.BQk(),t.YNc(33,M,1,0,"tr",21),t.YNc(34,F,1,0,"tr",22),t.qZA(),t.TgZ(35,"mat-paginator",23),t.NdJ("page",function(r){return a.onPaginate(r)}),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(8),t.Q6J("svgIcon","heroicons_solid:chevron-right"),t.xp6(9),t.Q6J("dataSource",a.requests),t.xp6(16),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("length",a.totalItems)("pageSize",a.itemsPerPage)("pageSizeOptions",t.DdM(7,J)))},directives:[h.Hw,C.KE,Z.Nt,s.BZ,s.w1,s.fO,s.Dz,s.as,s.nj,T.NW,s.ge,s.ev,x.lW,v.gM,d.O5,s.XQ,s.Gk],styles:["table[_ngcontent-%COMP%]{width:100%}.badge[_ngcontent-%COMP%]{color:#fff!important;font-weight:bold}"]}),e})();var j=n(44522),E=n(88182),O=n(34504);const _=[{path:"",component:H}];let $=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[f.K,m.s,{provide:j.TP,useClass:E.X,multi:!0}],imports:[[p.Bz.forChild(_),d.ez,h.Ps,s.p0,x.ot,v.AV,T.TU,C.lN,Z.c,u.u5,g.Is,O.Q]]}),e})()}}]);